@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

.forest-tree {
    background-size: contain; 
    background-position: center bottom;
    background-repeat: no-repeat;
    mix-blend-mode: multiply; 
    transition: all 0.5s ease-in-out; 
    transform-origin: bottom center;
    animation: sway 15s ease-in-out infinite alternate; 
    
    /* Ukuran default untuk HP (Hanya Pohon A-1) */
    width: 95%; 
    height: 70vh; 
    opacity: 1; /* Opacity default */
}

.dark .forest-tree {
    mix-blend-mode: normal; /* Nonaktifkan mix-blend-mode di dark mode jika gambar siluet sudah hitam */
}

/* --- Keyframes untuk Animasi Sway (tetap sama) --- */
@keyframes sway {
    0% {
        transform: rotateZ(0deg) scale(1);
    }
    50% {
        transform: rotateZ(0.5deg) scale(1.005);
    }
    100% {
        transform: rotateZ(0deg) scale(1);
    }
}

/* --- MOBILE (Default/HP) - 1 Pohon (A-1) --- */
.forest-tree-A-1 {
    width: 95%; /* Hampir menutupi lebar HP */
    height: 70vh;
    opacity: 0.9;
}

/* --- TABLET (md) - 2 Pohon (A-1 Besar, B-2 Sedang) --- */
@media (min-width: 768px) { /* md breakpoint */
    /* POHON A-1 (DEPAN, PALING BESAR) */
    .forest-tree-A-1 {
        width: 60%; /* Dikecilkan agar ada ruang untuk Pohon B-2 */
        height: 75vh;
        left: 60%; /* Geser sedikit ke kanan */
        opacity: 0.9;
    }
    
    /* POHON B-2 (TENGAH, SEDANG) - Muncul */
    .forest-tree-B-2 {
        width: 50%;
        height: 65vh; 
        left: 30%; /* Geser ke kiri */
        opacity: 0.7; /* Lebih transparan */
        z-index: 0; /* Pastikan di belakang A-1 (jika A-1 z-index lebih tinggi, tapi z-index 0 di parent sudah cukup) */
    }
    .forest-tree-C-small-2 { /* Yang ini muncul di MD */
        width: 150px; /* Ukuran kecil */
        height: 200px;
        left: 70%; /* Posisikan di kanan */
        opacity: 0.2; /* Sangat transparan */
        z-index: -1; /* Paling belakang dari semua pohon */
    }
}

/* --- DESKTOP (lg) - 3 Pohon (A-1 Besar, B-2 Sedang, A-3 Kecil) --- */
@media (min-width: 1024px) { /* lg breakpoint */
    /* POHON A-1 (DEPAN, PALING BESAR) */
    .forest-tree-A-1 {
        width: 750px; 
        height: 850px;
        left: 55%;
        opacity: 0.8; /* Paling jelas */
    }
    
    /* POHON B-2 (TENGAH, SEDANG) */
    .forest-tree-B-2 {
        width: 550px; 
        height: 700px;
        left: 30%;
        opacity: 0.6; /* Sedang */
    }
    
    /* POHON A-3 (BELAKANG, PALING KECIL) - Muncul */

    .forest-tree-A-3 {
        width: 350px; 
        height: 500px; 
        right: 10%; /* Turunkan dari 15% atau 20% menjadi 10% agar lebih aman */
        opacity: 0.5;
    }

    /* POHON C-small (Semua muncul di desktop) */
    .forest-tree-C-small-1 {
        width: 200px;
        height: 300px;
        left: 0%; /* Diubah dari 2% menjadi 0% */
        opacity: 0.3;
        z-index: -1;
    }
    .forest-tree-C-small-2 {
        width: 180px;
        height: 280px;
        left: 70%; 
        opacity: 0.2;
        z-index: -1;
    }
    .forest-tree-C-small-3 {
        width: 150px;
        height: 250px;
        right: 0%; /* Diubah dari 2% menjadi 0% */
        opacity: 0.25;
        z-index: -1;
    }
     .forest-tree-C-small-4 { 
        width: 100px;
        height: 180px;
        left: 40%;
        opacity: 0.15;
        z-index: -2; 
    }
}

@keyframes sway {
    0% {
        transform: rotateZ(0deg) scale(1);
    }
    15% {
        transform: rotateZ(0.3deg) scale(1.005);
    }
    25% {
        transform: rotateZ(0.5deg) scale(1.01); 
    }
    40% {
        transform: rotateZ(0.8deg) scale(1.03); 
    }
    50% {
        transform: rotateZ(0deg) scale(1);
    }
    60% {
        transform: rotateZ(-0.8deg) scale(1.03); 
    }
    75% {
        transform: rotateZ(-0.5deg) scale(1.01); /* Sedikit miring ke kiri, sedikit membesar */
    }
    85% {
        transform: rotateZ(-0.3deg) scale(1.005);
    }
    100% {
        transform: rotateZ(0deg) scale(1);
    }
}

.leaf {
    position: absolute;
    /* WARNA DAUN: Gunakan variabel CSS untuk memudahkan perubahan tema */
    background-color: var(--leaf-color-light, rgba(139, 69, 19, 0.7)); /* Coklat tua */
    
    /* Bentuk daun dengan border-radius yang bervariasi */
    border-radius: 50% 10% 50% 10% / 10% 50% 10% 50%; /* Bentuk elips atau sedikit melengkung */
    
    opacity: 0;
    pointer-events: none;
    animation: fall linear infinite; /* Animasi jatuh */
    
    /* Ukuran dasar daun (akan ditimpa oleh JS) */
    width: 15px;
    height: 10px; 
    box-shadow: 0 0 3px rgba(0,0,0,0.3);
}

/* Variasi warna daun untuk mode gelap */
.dark .leaf {
    background-color: var(--leaf-color-dark, rgba(80, 40, 10, 0.7)); /* Coklat lebih gelap di dark mode */
}


/* Animasi jatuh (tetap sama) */
@keyframes fall {
    0% {
        transform: translate3d(0, -100px, 0) rotateZ(0deg) scale(0.8);
        opacity: 0;
    }
    10% {
        opacity: 0.8;
    }
    90% {
        opacity: 0.8;
    }
    100% {
        transform: translate3d(
            var(--leaf-x-end, 0px), 
            calc(100vh + 100px), 
            0
        ) rotateZ(
            var(--leaf-rotate-end, 360deg)
        ) scale(
            var(--leaf-scale-end, 1)
        );
        opacity: 0;
    }
}

.bg-game-completed {
    /* Contoh: Border hijau solid dan shadow glow */
    border: 1px solid theme('colors.green.600'); 
    box-shadow: 0 0 15px theme('colors.green.500'), 0 0 5px theme('colors.green.500') inset;
    transition: all 0.5s ease-in-out;
}

/* Sedikit redup di dark mode */
.dark .bg-game-completed {
    border-color: theme('colors.lime.400');
    box-shadow: 0 0 15px theme('colors.lime.400'), 0 0 5px theme('colors.lime.400') inset;
}
.bird {
    position: absolute; 
    color: black; 
    pointer-events: none;
    
    /* Durasi dan nama akan diatur oleh JS */
    animation-timing-function: linear; 
    animation-iteration-count: infinite; 
    
    transition: opacity 0.5s;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5)); 
    
    /* Pastikan SVG mengisi div */
    & svg {
        width: 100%;
        height: 100%;
        display: block;
    }
}


/* 1. JALUR: Kiri Bawah -> Kanan Atas (TIDAK ADA FLIP) */
@keyframes fly-path-1 {
    0% {
        /* Mulai dari luar layar (kiri bawah, dinaikkan ke 80vh) */
        transform: translate(-100vw, 80vh) rotate(-10deg) scale(0.8); 
        opacity: 0;
    }
    50% {
        /* Titik tengah vertikal di 40vh */
        transform: translate(50vw, 40vh) rotate(-5deg) scale(1.1);
        opacity: 1;
    }
    100% {
        /* Berakhir di luar layar (atas kanan) */
        transform: translate(110vw, -20vh) rotate(10deg) scale(0.7); 
        opacity: 0;
    }
}

/* 2. JALUR: Kanan Bawah -> Kiri Atas (FLIP HORIZONTAL) */
@keyframes fly-path-2 {
    0% {
        /* Mulai dari luar layar (kanan bawah, dinaikkan ke 80vh) */
        transform: translate(100vw, 80vh) rotate(10deg) scale(0.8) scaleX(-1); 
        opacity: 0;
    }
    50% {
        /* Titik tengah vertikal di 40vh */
        transform: translate(50vw, 40vh) rotate(5deg) scale(1.1) scaleX(-1); 
        opacity: 1;
    }
    100% {
        /* Berakhir di luar layar (atas kiri) */
        transform: translate(-10vw, -20vh) rotate(-10deg) scale(0.7) scaleX(-1); 
        opacity: 0;
    }
}

/* 3. JALUR: Kiri Atas -> Kanan Bawah */
@keyframes fly-path-3 {
    0% {
        /* Mulai dari luar layar (atas kiri) */
        transform: translate(-100vw, -20vh) rotate(-10deg) scale(0.8); 
        opacity: 0;
    }
    50% {
        /* Titik tengah vertikal di 60vh */
        transform: translate(50vw, 60vh) rotate(-5deg) scale(1.1);
        opacity: 1;
    }
    100% {
        /* Berakhir di luar layar (kanan bawah, dibatasi di 80vh) */
        transform: translate(110vw, 80vh) rotate(10deg) scale(0.7); 
        opacity: 0;
    }
}

/* 4. JALUR: Kanan Atas -> Kiri Bawah (FLIP HORIZONTAL) */
@keyframes fly-path-4 {
    0% {
        /* Mulai dari luar layar (atas kanan) */
        transform: translate(100vw, -20vh) rotate(10deg) scale(0.8) scaleX(-1); 
        opacity: 0;
    }
    50% {
        /* Titik tengah vertikal di 60vh */
        transform: translate(50vw, 60vh) rotate(5deg) scale(1.1) scaleX(-1);
        opacity: 1;
    }
    100% {
        /* Berakhir di luar layar (kiri bawah, dibatasi di 80vh) */
        transform: translate(-10vw, 80vh) rotate(-10deg) scale(0.7) scaleX(-1); 
        opacity: 0;
    }
}
